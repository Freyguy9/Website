<!DOCTYPE html>

<html ng-app="blogApp" lang="en-US">
<head>
<script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.2.14/angular.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.2.14/angular-route.min.js"></script>
<script src="//unpkg.com/@uirouter/angularjs@1.2.14/release/angular-ui-router.min.js"></script>
<script src="bloggerApp.js"></script>
<script src="/nav/navigation.js"></script>
<link rel='stylesheet' href='stylesheets/style.css'/>
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"/>
</head>
<!-- Navigation -->  
<body ng-controller="homeController">

  <div ng-controller="NavigationController">
    <navigation></navigation>  
  </div>
  
  <script type="text/ng-template" id="home.html">
    <h1>{{vm.homeHeader}}</h1>
    <p>{{vm.homeText}}</p>
  </script>

  <!--List Page--> 
  <script type="text/ng-template" id="list.html">
    <h1>{{vm.listHeader}}</h1>
    <p></p>
    <div ng-repeat="game in vm.games">
      <div class="card text-white bg-dark mb-3" style="width: 18rem;">
	<div class="card-body">
	  <h5 class="card-title">{{game.xUser}} vs {{game.oUser}}</h5>
	  <p ng-show="vm.game.winner != ''" class="card-text">Winner: {{game.winner}}</p>
	  <h5 class="card-text" style="font-size: .67em">Created on {{game.playedOn}}</h5>
	  <a ng-show="vm.isLoggedIn()" href="#/game/{{game._id}}" class="btn btn-primary">View Game</a>
	  <a ng-show="vm.isLoggedIn() && vm.isAuthor(game)" href="#/remove/{{game._id}}"  class="btn btn-primary">Delete</a>
	</div>
      </div>
    </div>
  </script>
  
  <!--Add Page-->
  <script type="text/ng-template" id="add.html">
      <form name="userForm" ng-submit="vm.submit()" ng-controller="addController" style="padding: 20px">
	<input type="submit" class="btn btn-primary" value="Start New Game">
      </form>
    </div>
  </script>

  <!-- Game Page-->
  <script type="text/ng-template" id="game.html">
    <form name="gameForm" ng-submit="vm.submit()" ng-controller="gameController">
      <h1 ng-show="vm.game.winner == ''">{{vm.game.xUser}} vs. {{vm.game.oUser}}</h1>
      <h3>{{vm.game.userTurn}}'s Turn</h3>
      <h5 ng-show="vm.game.winner != ''">{{vm.game.winner}} Wins!!!!</h5>
      <button ng-show="(vm.game.oUser=='' && vm.getUserEmail() != vm.game.xUserEmail)" ng-click="vm.joinGame()" class="btn btn-default">Join Game</button>
      <div class="grid-container">
	<div class="grid-item" id="cell1" name="cell1" ng-click="vm.isUserTurn() && vm.clickedOn('1')">{{vm.game.cell1}}</div>
	<div class="grid-item" id="cell2" name="cell2" ng-click="vm.isUserTurn() && vm.clickedOn('2')">{{vm.game.cell2}}</div>
	<div class="grid-item" id="cell3" name="cell3" ng-click="vm.isUserTurn() && vm.clickedOn('3')">{{vm.game.cell3}}</div>
	<div class="grid-item" id="cell4" name="cell4" ng-click="vm.isUserTurn() && vm.clickedOn('4')">{{vm.game.cell4}}</div>
	<div class="grid-item" id="cell5" name="cell5" ng-click="vm.isUserTurn() && vm.clickedOn('5')">{{vm.game.cell5}}</div>
	<div class="grid-item" id="cell6" name="cell6" ng-click="vm.isUserTurn() && vm.clickedOn('6')">{{vm.game.cell6}}</div>
	<div class="grid-item" id="cell7" name="cell7" ng-click="vm.isUserTurn() && vm.clickedOn('7')">{{vm.game.cell7}}</div>
	<div class="grid-item" id="cell8" name="cell8" ng-click="vm.isUserTurn() && vm.clickedOn('8')">{{vm.game.cell8}}</div>
	<div class="grid-item" id="cell9" name="cell9" ng-click="vm.isUserTurn() && vm.clickedOn('9')">{{vm.game.cell9}}</div>
      </div>
      <a ng-click="vm.stopGame()" href="#/list" class="btn btn-primary">Leave Game</a>
    </form>
  </script>
  
<!-- Edit Page
<script type="text/ng-template" id="edit.html">
  <p></p>
  <div class="card text-white bg-dark mb-3" style="width: 50%">  
    <form name="userForm" ng-submit="vm.submit()" ng-controller="editController" style="padding: 20px">
      <div class="form-group">
        <input class="form-control" id="blogtitle" name="blogtitle" value="{{vm.blog.blogtitle}}">
        <textarea class="form-control" id="blogtext" name="blogtext" rows="3">{{vm.blog.blogtext}}</textarea>
      </div>
      <input type="submit" class="btn btn-primary" value="Save Blog">
    </form> 
  </div>
</script>-->

<script type="text/ng-template" id="remove.html">
  <p></p>
  <div class="card text-white bg-dark mb-3" style="width: 18rem">
    <form name="userForm" ng-submit="vm.submit()" ng-controller="removeController" style="padding: 20px">
      <div class="card-body">
        <h5 class="card-title">{{vm.game.xUser}} vs {{vm.game.oUser}}</h5>
      </div>
      <input type="submit" class="btn btn-primary" value="Delete Game">
    </form>
  </div>
</script>

<!-- Register Page -->
<script type="text/ng-template" id="register.html">
 <div class="container">
  <page-header content="vm.pageHeader"></page-header>

  <div class="row">
    <div class="col-md-6 col-sm-12">
      <p class="lead">Already a member? Please <a href="/#login?page={{ vm.returnPage }}">log in</a> instead.</p>
      <form ng-submit="vm.onSubmit()" ng-controller="RegisterController">
        <div role="alert" ng-show="vm.formError" class="alert alert-danger">{{ vm.formError }}</div>
        <div class="form-group">
          <label for="name">Full name</label>
          <input type="text" class="form-control" id="name" placeholder="Enter your name" ng-model="vm.credentials.name">
        </div>
        <div class="form-group">
          <label for="email">Email address</label>
          <input type="email" class="form-control" id="email" placeholder="Enter email" ng-model="vm.credentials.email">
        </div>
        <div class="form-group">
          <label for="password">Password</label>
          <input type="password" class="form-control" id="password" placeholder="Password" ng-model="vm.credentials.password">
        </div>
        <button type="submit" class="btn btn-default">Register!</button>
      </form>
    </div>
  </div>
 </div>
</script>

<!-- Login Page -->
<script type="text/ng-template" id="login.html">
  <div class="container">
    <page-header content="vm.pageHeader"></page-header>

    <div class="row">
      <div class="col-md-6 col-sm-8">
	<p class="lead">Not a member? Please <a href="/#register?page={{ vm.returnPage }}">register</a> first.</p>
	<form ng-submit="vm.onSubmit()" ng-controller="LoginController">
          <div role="alert" ng-show="vm.formError" class="alert alert-danger">{{ vm.formError }}</div>
          <div class="form-group">
            <label for="email">Email address</label>
            <input type="email" class="form-control" id="email" placeholder="Enter email" ng-model="vm.credentials.email">
          </div>
          <div class="form-group">
            <label for="password">Password</label>
            <input type="password" class="form-control" id="password" placeholder="Password" ng-model="vm.credentials.password">
          </div>
          <button type="submit" class="btn btn-default">Sign in!</button>
	</form>
      </div>
    </div>
  </div>
</script>
  <div ng-view></div
</body>
</html>
